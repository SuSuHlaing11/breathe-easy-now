# Fixes_2026-02-15

## Summary of Work
- Centralized org type/data domain label-to-enum mapping helpers.
- Updated org request form and admin org creation to use shared mapping helpers.
- Added OpenAQ pollution integration tasks to frontend checklist.
- Added OpenAQ API helper and types.
- Added pollution metric selector in analysis filters.
- Wired analysis to fetch OpenAQ pins and render them on the Leaflet map.
- Split analysis filters into collapsible Pollution and Health groups.
- Added PM2.5 coverage-weighted pollution value to health country tooltips.
- Removed default selected countries for map; table falls back to ASEAN defaults when no selection.
- Added OpenAQ trend API integration and wired chart to backend data.
- Extended IMHE trend API helper to support year range.
- Added pollution trend method toggle (weighted/unweighted/balanced/median).
- Updated pollution tooltip label to use selected pollutant name.
- Added percentile-based purple pin scale and legend for pollution pins.
- Fixed pin size to constant radius; color now encodes intensity alone.
- Decoupled map year from table/trend and switched pollution summary to `pollution_value`.
- Removed trend debug logging.
- Added pollutant-specific pin color palettes and dynamic legend.
- Normalized pollutant labels (strip " mass") for pin color + legends.
- Kept year slider on map only; added table year dropdown and trend from/to selectors.

## Checkpoints Status
- Frontend tests: **NOT RUN**
- Manual smoke: **PENDING**

## Files Updated
- `src/lib/enumMaps.ts`
- `src/components/OrganizationRequestForm.tsx`
- `src/pages/admin/AdminCreateUser.tsx`
- `FRONTEND_CHECKLIST.md`
- `src/lib/API.ts`
- `src/pages/Analysis.tsx`
- `src/components/AnalysisFilters.tsx`
- `src/components/DataVisualization.tsx`
- `src/components/LeafletMap.tsx`
- `src/lib/API.ts`
